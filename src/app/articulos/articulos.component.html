<div class="articulos-container">

  <!-- üè∑Ô∏è T√≠tulo y bot√≥n -->
  <div class="header-articulos">
    <h2 *ngIf="categoria">Art√≠culos de {{ categoria }}</h2>
    <h2 *ngIf="!categoria">Explora nuestros art√≠culos</h2>

    <button class="btn-publicar"
      (click)="mostrarFormulario = !mostrarFormulario">
      {{ mostrarFormulario ? 'Cerrar formulario' : 'Publicar art√≠culo' }}
    </button>
  </div>

  <!-- üìù FORMULARIO DE PUBLICACI√ìN -->
  <div class="formulario-container" *ngIf="mostrarFormulario">

    <div class="image-preview" *ngIf="imagenPreview">
      <img [src]="imagenPreview">
    </div>

    <label class="label">Imagen del art√≠culo</label>
    <input type="file" accept="image/*" (change)="onImageSelected($event)">

    <label class="label">Nombre</label>
    <input class="input" [(ngModel)]="nuevoArticulo.nombre">

    <label class="label">Descripci√≥n</label>
    <textarea class="textarea" [(ngModel)]="nuevoArticulo.descripcion"></textarea>

    <label class="label">Categor√≠a</label>
    <select class="select" [(ngModel)]="nuevoArticulo.categoria">
      <option value="">Seleccione...</option>
      <option value="ropa">Ropa</option>
      <option value="tecnologia">Tecnolog√≠a</option>
      <option value="accesorios">Accesorios</option>
      <option value="hogar">Hogar</option>
      <option value="otros">Otros</option>
    </select>

    <label class="label">¬øPor qu√© deseas intercambiarlo?</label>
    <textarea class="textarea" [(ngModel)]="nuevoArticulo.motivo"></textarea>

    <button class="btn-publicar2" (click)="publicarArticulo()">
      Publicar
    </button>
  </div>

  <!-- üìù FORMULARIO DE EDICI√ìN -->
  <div class="formulario-container" *ngIf="editando">
    <h3>Editar art√≠culo</h3>

    <div class="image-preview" *ngIf="imagenEditPreview">
      <img [src]="imagenEditPreview">
    </div>

    <label class="label">Cambiar imagen</label>
    <input type="file" accept="image/*" (change)="onEditImageSelected($event)">

    <label class="label">Nombre</label>
    <input class="input" [(ngModel)]="articuloEditado.nombre">

    <label class="label">Descripci√≥n</label>
    <textarea class="textarea" [(ngModel)]="articuloEditado.descripcion"></textarea>

    <label class="label">Categor√≠a</label>
    <select class="select" [(ngModel)]="articuloEditado.categoria">
      <option value="ropa">Ropa</option>
      <option value="tecnologia">Tecnolog√≠a</option>
      <option value="accesorios">Accesorios</option>
      <option value="hogar">Hogar</option>
      <option value="otros">Otros</option>
    </select>

    <label class="label">Motivo</label>
    <textarea class="textarea" [(ngModel)]="articuloEditado.motivo"></textarea>

    <button class="btn-publicar2" (click)="guardarCambios()">Guardar cambios</button>
    <button class="btn-cancelar" (click)="cancelarEdicion()">Cancelar</button>
  </div>

  <!-- üì¶ Lista de art√≠culos -->
  <div class="articulos-grid" *ngIf="articulosFiltrados.length > 0; else sinArticulos">
    <div class="articulo-card" *ngFor="let articulo of articulosFiltrados">
      <img [src]="articulo.imagen" [alt]="articulo.nombre" class="articulo-img" />
      <div class="articulo-info">
        <h3>{{ articulo.nombre }}</h3>
        <p>{{ articulo.descripcion }}</p>
        <p class="motivo"><strong>Motivo:</strong> {{ articulo.motivo }}</p>
      </div>

      <!-- BOTONES DE ACCI√ìN -->
      <div class="acciones-articulo">
        <button class="btn-editar" (click)="editarArticulo(articulo)">Editar</button>
        <button class="btn-eliminar" (click)="eliminarArticulo(articulo)">Eliminar</button>
      </div>
    </div>
  </div>

  <!-- ‚ùå Mensaje si no hay resultados -->
  <ng-template #sinArticulos>
    <div class="no-articulos">
      <p>No hay art√≠culos disponibles en esta categor√≠a.</p>
      <img src="assets/img/empty.png" alt="Sin art√≠culos" class="empty-img" />
    </div>
  </ng-template>

</div>
